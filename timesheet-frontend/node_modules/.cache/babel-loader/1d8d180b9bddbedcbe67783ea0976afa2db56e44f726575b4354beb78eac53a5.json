{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kop_k\\\\OneDrive\\\\\\u0E40\\u0E14\\u0E2A\\u0E01\\u0E4C\\u0E17\\u0E47\\u0E2D\\u0E1B\\\\GitHubLS\\\\TimeSheetForStudent\\\\timesheet-frontend\\\\src\\\\pages\\\\AdminDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Navbar from '../components/Navbar'; // นำเข้า Navbar ด้านบนของหน้า\nimport { Box, Typography, Table, TableHead, TableRow, TableCell, TableBody, Button, CircularProgress // แสดงโหลดขณะรอข้อมูล\n} from '@mui/material';\nimport { getAllStudents, deleteStudent } from '../services/studentService'; // ฟังก์ชันเรียก API ดึงและลบนักศึกษา\nimport { useAuth } from '../context/AuthContext'; // ดึง token จาก Context สำหรับยืนยันตัวตน\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AdminDashboard() {\n  _s();\n  const {\n    token\n  } = useAuth(); // ดึง JWT token จาก context เพื่อใช้เรียก API\n  const [students, setStudents] = useState([]); // เก็บรายชื่อนักศึกษา\n  const [loading, setLoading] = useState(true); // สถานะโหลดข้อมูล\n\n  // ฟังก์ชันโหลดรายชื่อนักศึกษาจาก API\n  const fetchStudents = async () => {\n    try {\n      console.log('token:', token);\n      const res = await getAllStudents(token); // เรียก API พร้อมส่ง token\n      setStudents(res.data); // เก็บข้อมูลลง state\n    } catch (err) {\n      alert('ไม่สามารถโหลดข้อมูลนักศึกษาได้'); // แจ้งเตือนเมื่อโหลดข้อมูลล้มเหลว\n    } finally {\n      setLoading(false); // ปิดสถานะโหลดไม่ว่าจะสำเร็จหรือไม่\n    }\n  };\n\n  // ฟังก์ชันลบนักศึกษา โดยรับ id ของนักศึกษาที่จะลบ\n  const handleDelete = async id => {\n    const confirm = window.confirm('ต้องการลบนักศึกษาคนนี้ใช่หรือไม่?'); // ยืนยันการลบ\n    if (!confirm) return; // ถ้าไม่ยืนยัน หยุดทำงาน\n\n    try {\n      await deleteStudent(id, token); // เรียก API ลบนักศึกษาโดยส่ง id และ token\n      // อัพเดต state โดยลบนักศึกษาที่ถูกลบออกจากรายชื่อ\n      setStudents(prev => prev.filter(s => s.id !== id));\n    } catch (err) {\n      alert('ลบไม่สำเร็จ'); // แจ้งเตือนหากลบไม่สำเร็จ\n    }\n  };\n\n  // โหลดข้อมูลนักศึกษาตอน component แสดงผลครั้งแรก\n  useEffect(() => {\n    fetchStudents();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        gutterBottom: true,\n        children: \"\\u0E23\\u0E32\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E19\\u0E31\\u0E01\\u0E28\\u0E36\\u0E01\\u0E29\\u0E32\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Table, {\n        children: [/*#__PURE__*/_jsxDEV(TableHead, {\n          children: /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E19\\u0E31\\u0E01\\u0E28\\u0E36\\u0E01\\u0E29\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D-\\u0E19\\u0E32\\u0E21\\u0E2A\\u0E01\\u0E38\\u0E25\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"\\u0E1A\\u0E17\\u0E1A\\u0E32\\u0E17\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"\\u0E25\\u0E1A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n          children: students.map(s => /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              children: s.studentId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: s.fullName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, this), \" \", /*#__PURE__*/_jsxDEV(TableCell, {\n              children: s.role\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                color: \"error\",\n                variant: \"outlined\",\n                onClick: () => handleDelete(s.id),\n                children: \"\\u0E25\\u0E1A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 19\n            }, this)]\n          }, s.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(AdminDashboard, \"pGCo8Up6UZbSmfuUbHGLgIeqWpo=\", false, function () {\n  return [useAuth];\n});\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useEffect","useState","Navbar","Box","Typography","Table","TableHead","TableRow","TableCell","TableBody","Button","CircularProgress","getAllStudents","deleteStudent","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","AdminDashboard","_s","token","students","setStudents","loading","setLoading","fetchStudents","console","log","res","data","err","alert","handleDelete","id","confirm","window","prev","filter","s","children","fileName","_jsxFileName","lineNumber","columnNumber","sx","p","variant","gutterBottom","map","studentId","fullName","role","color","onClick","_c","$RefreshReg$"],"sources":["C:/Users/kop_k/OneDrive/เดสก์ท็อป/GitHubLS/TimeSheetForStudent/timesheet-frontend/src/pages/AdminDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Navbar from '../components/Navbar'; // นำเข้า Navbar ด้านบนของหน้า\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  Button,\r\n  CircularProgress, // แสดงโหลดขณะรอข้อมูล\r\n} from '@mui/material';\r\nimport { getAllStudents, deleteStudent } from '../services/studentService'; // ฟังก์ชันเรียก API ดึงและลบนักศึกษา\r\nimport { useAuth } from '../context/AuthContext'; // ดึง token จาก Context สำหรับยืนยันตัวตน\r\n\r\nfunction AdminDashboard() {\r\n  const { token } = useAuth(); // ดึง JWT token จาก context เพื่อใช้เรียก API\r\n  const [students, setStudents] = useState([]); // เก็บรายชื่อนักศึกษา\r\n  const [loading, setLoading] = useState(true); // สถานะโหลดข้อมูล\r\n\r\n  // ฟังก์ชันโหลดรายชื่อนักศึกษาจาก API\r\n  const fetchStudents = async () => {\r\n    try {\r\n      console.log('token:', token);\r\n      const res = await getAllStudents(token); // เรียก API พร้อมส่ง token\r\n      setStudents(res.data); // เก็บข้อมูลลง state\r\n    } catch (err) {\r\n      alert('ไม่สามารถโหลดข้อมูลนักศึกษาได้'); // แจ้งเตือนเมื่อโหลดข้อมูลล้มเหลว\r\n    } finally {\r\n      setLoading(false); // ปิดสถานะโหลดไม่ว่าจะสำเร็จหรือไม่\r\n    }\r\n  };\r\n\r\n  // ฟังก์ชันลบนักศึกษา โดยรับ id ของนักศึกษาที่จะลบ\r\n  const handleDelete = async (id) => {\r\n    const confirm = window.confirm('ต้องการลบนักศึกษาคนนี้ใช่หรือไม่?'); // ยืนยันการลบ\r\n    if (!confirm) return; // ถ้าไม่ยืนยัน หยุดทำงาน\r\n\r\n    try {\r\n      await deleteStudent(id, token); // เรียก API ลบนักศึกษาโดยส่ง id และ token\r\n      // อัพเดต state โดยลบนักศึกษาที่ถูกลบออกจากรายชื่อ\r\n      setStudents((prev) => prev.filter((s) => s.id !== id));\r\n    } catch (err) {\r\n      alert('ลบไม่สำเร็จ'); // แจ้งเตือนหากลบไม่สำเร็จ\r\n    }\r\n  };\r\n\r\n  // โหลดข้อมูลนักศึกษาตอน component แสดงผลครั้งแรก\r\n  useEffect(() => {\r\n    fetchStudents();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <Navbar /> {/* แถบนำทางด้านบน */}\r\n      <Box sx={{ p: 4 }}>\r\n        <Typography variant=\"h4\" gutterBottom>\r\n          รายชื่อนักศึกษาทั้งหมด\r\n        </Typography>\r\n\r\n        {/* แสดง loading ขณะรอข้อมูล */}\r\n        {loading ? (\r\n          <CircularProgress />\r\n        ) : (\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow>\r\n                {/* หัวตาราง */}\r\n                <TableCell>รหัสนักศึกษา</TableCell>\r\n                <TableCell>ชื่อ-นามสกุล</TableCell>\r\n                <TableCell>บทบาท</TableCell>\r\n                <TableCell>ลบ</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {/* วนลูปรายชื่อนักศึกษาแต่ละคน */}\r\n              {students.map((s) => (\r\n                <TableRow key={s.id}>\r\n                  <TableCell>{s.studentId}</TableCell>\r\n                  <TableCell>{s.fullName}</TableCell> {/* แก้ชื่อจาก name เป็น fullName */}\r\n                  <TableCell>{s.role}</TableCell>\r\n                  <TableCell>\r\n                    {/* ปุ่มลบ สำหรับลบนักศึกษาคนนี้ */}\r\n                    <Button\r\n                      color=\"error\"\r\n                      variant=\"outlined\"\r\n                      onClick={() => handleDelete(s.id)}\r\n                    >\r\n                      ลบ\r\n                    </Button>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        )}\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}